<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Filmes - Cinema Cultural</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link id="themeStylesheet" rel="stylesheet" href="css/light.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="js/theme.js" defer></script>
  <script src="js/api.js" defer></script>
</head>
<body>
  <nav class="navbar p-3 d-flex justify-content-between">
    <h1>ðŸŽ¬ Lista de Filmes</h1>
    <button onclick="toggleTheme()" class="btn btn-secondary">Alternar Tema</button>
  </nav>

  <div class="container mt-4">
    <a href="cadastro.html" class="btn btn-primary mb-3">+ Novo Filme</a>
    <table class="table" id="tabelaFilmesContainer">
      <thead>
        <tr>
          <th>ID</th>
          <th>TÃ­tulo</th>
          <th>GÃªnero</th>
          <th>Ano</th>
          <th>AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody id="tabelaFilmes"></tbody>
    </table>
  </div>

  <script>
    $(document).ready(function() {
        listarFilmes(function(filmes) {
            $("#tabelaFilmes").empty();
            filmes.forEach(filme => {
                $("#tabelaFilmes").append(`
                    <tr>
                        <td>${filme.id}</td>
                        <td>${filme.titulo}</td>
                        <td>${filme.genero}</td>
                        <td>${filme.anoLancamento}</td>
                        <td>
                            <a href="editar.html?id=${filme.id}" class="btn btn-sm btn-warning">Editar</a>
                            <a href="analises.html?id=${filme.id}" class="btn btn-sm btn-info text-white">AnÃ¡lises</a>
                            <button onclick="deletarFilme(${filme.id}, ()=>listarFilmes(filmes => location.reload()))" class="btn btn-sm btn-danger">Excluir</button>
                        </td>
                    </tr>
                `);
            });
        });
    });
  </script>
</body>
</html>
